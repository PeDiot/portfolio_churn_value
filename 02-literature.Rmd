```{r echo=FALSE}
knitr::opts_chunk$set(
  fig.align = "center", 
  echo = FALSE, 
  message = FALSE, 
  comment = FALSE, 
  warning = FALSE
)
```

# Literature Review {#literature}

Now the concepts of *portfolio*, *attrition* and *value* have been defined, it seems relevant to take a look at the literature on these notions. The literature review made in this chapter synthesises and analyses the available articles related to customer portfolio modelling, churn analysis as well as customer value estimation. The review combines concepts from Economics, Econometrics and Data Science. 

## On customer portfolio {#portfolio}

Over the course of time, there has been a  slight amendment on the area of use of this term. At the outset, this term was principally used in finance (Markowitz 1952). As it went along, this expression is now employed when referring to the CRM (Homburg & Al 2009).
Customer portfolio analysis enables managers and researchers to capture a customer’s value input to a firm’s portfolio of links rather than analyzing a customer’s value to the firm singly. 
This term is spread over three distinct ways of treating it.
For one thing, the most obvious thing might be to cleave the portfolio. What exactly does that mean? Well, the idea is quite clear. The authors consider a 4-branch segmented portfolio:

- Platinium
- Gold
- Silver
- Bronze

With two issues:

- Cost to serve a client
- Value of this client

The holy grail for a company would be to segment their clients in line with the value they give rise to. 
One question arises: Would companies treat customer segments differently if they could quantify their current and potential value? At first glance, one might think firms would enjoy having only platinium customers. This seems rational and cogent. Nonetheless, and this also acts as the second way of treatment, in a pre-release version of an article (Alain Bousquet 2021), the writer intends a completely novel and previously unseen idea of estimating a portfolio value. His idea is to rest no longer on the expected value of a portfolio, but rather on its variance. The brief conclusion that comes out is that it is preferable for the portfolio value to have some level of variance. Determining such a level could prove to be somewhat tricky. However the hunch behind that is easily understandable. A firm needs heterogeneous clients so as to properly segment them. Thus, she would be able to able to offer a great range of services.
Last but not least, both cases above are studied following a static way. A huge intake would be the dynamisation of the problem. As stated by (Christian Homburg, Viviana V. Steiner, & Dirk Totzek 2009), the value a customer has is prone to changes. Let us take the example of a teenager in a telecom company. It is likely he begins with a small monthly fee without lots of features. Nevertheless, when he gets older he will drastically change his consumption. The dynamics of a client are represented by Markov chains (insérer image). Therefor, firms try to estimate churn and status change probabilities over time. Dynamic portfolios get rid of one main concern about static portfolios: its annoying habit of underestimating low-value clients and overestimating high-value clients.


```{r timeline, fig.cap="A timeline on the concept of portfolio", out.height="300pt", out.width="400pt"}
knitr::include_graphics(path = "./imgs/portfolio_timeline.png")
```

## On attrition {#attrition}

Attrition or churn has become a buzzword these last years. It has sailed among different waterways: econometrics, machine learning...  Naturally enough, churn analysis has begun with the precious help of econometrics. Churn analysis can be seen as an economic problem.  Indeed, churners are really frequent on oligopolistic markets. Moreover, as (Ana Maria Perez Marin 2004) states, there is an asymmetrical information between potential churners (clients) and firms. Her paper aims at estimating the life expectancy of a customer in a firm's portfolio. Let us note her article is based on the insurance market, which has some peculiarities. She introduces a new non-parametric method to estimate customer lifetime duration.
Subsequently, there are some new survival analysis tools in the field of ML. As read on (Carolina Bellani 2019) The same market is kept: the insurance one. She uses many ML models, among which random forests, logistic regression, neural networks... The data preprocessing she makes is heavy. Indeed, she deals with unbalanced data and thus resorts to undersampling. This problem is common in ML, and it impacts negatively the estimation coherence. In order to get a robust enough model, one has to pick the best classification threshold according to one metric which bears in mind classification mistakes in both classes.
Ultimately, when a customers churns out of a firm, it may worth it to consider all possible outcomes for the reason he churned. For instance, a client might leave his telecom company because of the lack of services, or because of a terrible 5G reception. Time and time again, there are many sakes possible for the client to leave. That brings on the table our final topic: competing risks. The focus is put on (Dorenda Slof, Flavius Frasincar,Vladyslav Matsiiako 2021). The main interest of competing risk analysis is to determine the reason why the client would churn, and to prevent the churn by operating directly on this problem. They introduce two methods in the article. The first one being the incorporation of text-based data on duration models. For example, they look carefully at the emails sent by the customer to the customer service. By the way, this might be a chance to develop NLP models to try preventing the churn. Then, the second one is to analyse clients' requests, classify them and then stir them in the blender of features, which allows the models gaining performance and reliability.

## On customer value {#value}

In recent years, *customer portfolio management* (CPM) has focused on optimizing clients' value to the firm. The company's interest lies in knowing how much net benefit it can expect from a customer *today*. These expectations are then used to implement efficient marketing strategies to get the highest return on investment. To that end, two key metrics are estimated by firms, namely customer lifetime value (CLV) and customer equity (CE) (see part \@ref(value) in the introduction for definitions).

According to Blattberg and Deighton, CLV can be defined as the revenues derived from a customer minus the cost to the firm for maintaining the relationship with the customer over time [@CLV_DEF]. As shown by Reinartz and Kumar, CLV modelling depends on the type of relationship a firm has with its clients [@CLV_CONTEXT]. In a contractual relationship, customer defections are observed which means that longer lifetime means higher customer value. Conversely, when the relationship is non-contractual, uncertainty arises between the customer's purchase behavior and lifetime.

With the development of data collection tools, companies have lots of customer-level data (or customer transaction data) at their disposal to measure CLV [@CLV_NBD]. Consequently, different modelling approaches can be adopted in order to estimate customers' value.

RFM (Recency Frequency Monetary) models are considered the simplest strategy to increase CLV and customer's loyalty [@CLV]. It aims at targeting specific marketing campaigns at specific groups of customers to improve response rates. RFM models consists in creating clusters of clients based on three variables: 

- *recency* which is the time that has elapsed since a customer’s last activity with the firm; 
- *frequency* that is the number of times a customer transacted with the brand in a particular period of time; 
- *monetary* value of customer's prior purchases. 

However, RFM models have a limited predictive power since they only predict clients' behavior for the next period. 

In their article on CLV management, Borle and Singh draw the review of more advanced modelling techniques that can be implemented to estimate customers' value [@CLV_MEASUREMENT]. A popular method to estimate customer lifetime value is the negative binomial distribution (NBD) - Pareto [@CLV_NBD] which helps solving the lifetime uncertainty issue. The model takes past customer purchase behavior as input such as the number of purchases in a specific time window and the date of last transaction. Then the model outputs a repurchase probability as well as a transaction forecast for each individual. In Borle and Singh's research paper, a hierarchical bayesian model is implemented with a view to jointly predict customer's churn risk and spending pattern. Here, the main advantage of using a bayesian approach is to give priors on CLV's drivers. The study is base on data coming from a membership-based direct marketing company where firm/client relationships are non-contractual. In other words, the times of each customer joining the membership and terminating it are known once these events happen. Thus the implementation of a sophisticated estimation strategy is justified. 

In our study, emphasize is placed on estimating the overall value of a customer portfolio. The methodology we will develop is based on a research paper written by our Econometrics teacher Alain Bousquet, whose goal is provide tools for an efficient management of a patent portfolio [@BREVETS]. The main idea is to consider each patent as an asset with a related value which can generate income if this very patent is exploited. This modelling approach can be transposed to customer portfolio analysis with the customer's value corresponding to the CLV and the probability of exploitation being the opposite of the risk of *attrition*. In this context, CLV can be estimated with techniques mentioned above. The client's risk of churn can be modelled with duration models or machine learning techniques as evoked in \@ref(attrition).  

