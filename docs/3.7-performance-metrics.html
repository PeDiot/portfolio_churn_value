<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.7 Performance metrics | Portfolio, Churn &amp; Customer Value</title>
  <meta name="description" content="This research paper aims at modelling customer portfolio, churn and customer value." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="3.7 Performance metrics | Portfolio, Churn &amp; Customer Value" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This research paper aims at modelling customer portfolio, churn and customer value." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.7 Performance metrics | Portfolio, Churn &amp; Customer Value" />
  
  <meta name="twitter:description" content="This research paper aims at modelling customer portfolio, churn and customer value." />
  

<meta name="author" content="Hugo Cornet, Pierre-Emmanuel Diot, Guillaume Le Halper, Djawed Mancer" />


<meta name="date" content="2022-03-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="3.6-semi-parametric-estimation.html"/>
<link rel="next" href="4-data.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Portfolio, Churn & Customer Value</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="1" data-path="1-intro.html"><a href="1-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1.1-portfoliodef.html"><a href="1.1-portfoliodef.html"><i class="fa fa-check"></i><b>1.1</b> How to define a customer portfolio?</a></li>
<li class="chapter" data-level="1.2" data-path="1.2-attritiondef.html"><a href="1.2-attritiondef.html"><i class="fa fa-check"></i><b>1.2</b> What is attrition?</a></li>
<li class="chapter" data-level="1.3" data-path="1.3-valuedef.html"><a href="1.3-valuedef.html"><i class="fa fa-check"></i><b>1.3</b> What does customer “value” mean?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-literature.html"><a href="2-literature.html"><i class="fa fa-check"></i><b>2</b> Literature Review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2.1-portfolio.html"><a href="2.1-portfolio.html"><i class="fa fa-check"></i><b>2.1</b> On customer portfolio</a></li>
<li class="chapter" data-level="2.2" data-path="2.2-attrition.html"><a href="2.2-attrition.html"><i class="fa fa-check"></i><b>2.2</b> On attrition</a></li>
<li class="chapter" data-level="2.3" data-path="2.3-value.html"><a href="2.3-value.html"><i class="fa fa-check"></i><b>2.3</b> On customer value</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-duration.html"><a href="3-duration.html"><i class="fa fa-check"></i><b>3</b> Duration models</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3.1-definition.html"><a href="3.1-definition.html"><i class="fa fa-check"></i><b>3.1</b> Definition</a></li>
<li class="chapter" data-level="3.2" data-path="3.2-censoring-and-truncation.html"><a href="3.2-censoring-and-truncation.html"><i class="fa fa-check"></i><b>3.2</b> Censoring and Truncation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="3.2-censoring-and-truncation.html"><a href="3.2-censoring-and-truncation.html#censoring-mechanisms"><i class="fa fa-check"></i><b>3.2.1</b> Censoring mechanisms</a></li>
<li class="chapter" data-level="3.2.2" data-path="3.2-censoring-and-truncation.html"><a href="3.2-censoring-and-truncation.html#selection-bias"><i class="fa fa-check"></i><b>3.2.2</b> Selection bias</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3.3-probabilistic-concepts.html"><a href="3.3-probabilistic-concepts.html"><i class="fa fa-check"></i><b>3.3</b> Probabilistic concepts</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="3.3-probabilistic-concepts.html"><a href="3.3-probabilistic-concepts.html#survival-function"><i class="fa fa-check"></i><b>3.3.1</b> Survival function</a></li>
<li class="chapter" data-level="3.3.2" data-path="3.3-probabilistic-concepts.html"><a href="3.3-probabilistic-concepts.html#hazard-and-cumulative-hazard-functions"><i class="fa fa-check"></i><b>3.3.2</b> Hazard and Cumulative Hazard functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3.4-nonparam.html"><a href="3.4-nonparam.html"><i class="fa fa-check"></i><b>3.4</b> Nonparametric models</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="3.4-nonparam.html"><a href="3.4-nonparam.html#notations"><i class="fa fa-check"></i><b>3.4.1</b> Notations</a></li>
<li class="chapter" data-level="3.4.2" data-path="3.4-nonparam.html"><a href="3.4-nonparam.html#hazard-function-estimator"><i class="fa fa-check"></i><b>3.4.2</b> Hazard function estimator</a></li>
<li class="chapter" data-level="3.4.3" data-path="3.4-nonparam.html"><a href="3.4-nonparam.html#kaplan-meier-estimator"><i class="fa fa-check"></i><b>3.4.3</b> Kaplan-Meier estimator</a></li>
<li class="chapter" data-level="3.4.4" data-path="3.4-nonparam.html"><a href="3.4-nonparam.html#nelson-aalen-estimator"><i class="fa fa-check"></i><b>3.4.4</b> Nelson-Aalen estimator</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3.5-parametric-models.html"><a href="3.5-parametric-models.html"><i class="fa fa-check"></i><b>3.5</b> Parametric models</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="3.5-parametric-models.html"><a href="3.5-parametric-models.html#constant-hazard-exponential-model"><i class="fa fa-check"></i><b>3.5.1</b> Constant hazard (exponential model)</a></li>
<li class="chapter" data-level="3.5.2" data-path="3.5-parametric-models.html"><a href="3.5-parametric-models.html#monotone-hazard"><i class="fa fa-check"></i><b>3.5.2</b> Monotone hazard</a></li>
<li class="chapter" data-level="3.5.3" data-path="3.5-parametric-models.html"><a href="3.5-parametric-models.html#concave-and-convex-hazard"><i class="fa fa-check"></i><b>3.5.3</b> Concave and convex hazard</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3.6-semi-parametric-estimation.html"><a href="3.6-semi-parametric-estimation.html"><i class="fa fa-check"></i><b>3.6</b> Semi-parametric estimation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="3.6-semi-parametric-estimation.html"><a href="3.6-semi-parametric-estimation.html#proportional-hazards-models"><i class="fa fa-check"></i><b>3.6.1</b> <em>Proportional Hazards</em> models</a></li>
<li class="chapter" data-level="3.6.2" data-path="3.6-semi-parametric-estimation.html"><a href="3.6-semi-parametric-estimation.html#coxph"><i class="fa fa-check"></i><b>3.6.2</b> Cox PH model</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="3.7-performance-metrics.html"><a href="3.7-performance-metrics.html"><i class="fa fa-check"></i><b>3.7</b> Performance metrics</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="3.7-performance-metrics.html"><a href="3.7-performance-metrics.html#concordance-index-c-index"><i class="fa fa-check"></i><b>3.7.1</b> Concordance index (C-index)</a></li>
<li class="chapter" data-level="3.7.2" data-path="3.7-performance-metrics.html"><a href="3.7-performance-metrics.html#brier-score"><i class="fa fa-check"></i><b>3.7.2</b> Brier score</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data.html"><a href="4-data.html"><i class="fa fa-check"></i><b>4</b> Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4.1-general-overview.html"><a href="4.1-general-overview.html"><i class="fa fa-check"></i><b>4.1</b> General Overview</a></li>
<li class="chapter" data-level="4.2" data-path="4.2-churndescstats.html"><a href="4.2-churndescstats.html"><i class="fa fa-check"></i><b>4.2</b> <code>Churn_Value</code> and <code>Tenure_Months</code></a>
<ul>
<li class="chapter" data-level="" data-path="4.2-churndescstats.html"><a href="4.2-churndescstats.html#demographic-data"><i class="fa fa-check"></i>Demographic data</a></li>
<li class="chapter" data-level="" data-path="4.2-churndescstats.html"><a href="4.2-churndescstats.html#data-on-services-subscribed"><i class="fa fa-check"></i>Data on services subscribed</a></li>
<li class="chapter" data-level="" data-path="4.2-churndescstats.html"><a href="4.2-churndescstats.html#customer-account-data"><i class="fa fa-check"></i>Customer account data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4.3-churn-duration-and-price.html"><a href="4.3-churn-duration-and-price.html"><i class="fa fa-check"></i><b>4.3</b> Churn, duration and price</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-estimation.html"><a href="5-estimation.html"><i class="fa fa-check"></i><b>5</b> Estimation techniques</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5.1-featureselection.html"><a href="5.1-featureselection.html"><i class="fa fa-check"></i><b>5.1</b> Feature selection</a></li>
<li class="chapter" data-level="5.2" data-path="5.2-portfolio-segmentation.html"><a href="5.2-portfolio-segmentation.html"><i class="fa fa-check"></i><b>5.2</b> Portfolio segmentation</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="5.2-portfolio-segmentation.html"><a href="5.2-portfolio-segmentation.html#transforming-qualitative-variables-into-principal-axes"><i class="fa fa-check"></i><b>5.2.1</b> Transforming qualitative variables into principal axes</a></li>
<li class="chapter" data-level="5.2.2" data-path="5.2-portfolio-segmentation.html"><a href="5.2-portfolio-segmentation.html#hierarchical-clustering-on-principal-components"><i class="fa fa-check"></i><b>5.2.2</b> Hierarchical clustering on principal components</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5.3-churn-analysis.html"><a href="5.3-churn-analysis.html"><i class="fa fa-check"></i><b>5.3</b> Churn analysis</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="5.3-churn-analysis.html"><a href="5.3-churn-analysis.html#the-cox-model"><i class="fa fa-check"></i><b>5.3.1</b> The Cox model</a></li>
<li class="chapter" data-level="5.3.2" data-path="5.3-churn-analysis.html"><a href="5.3-churn-analysis.html#other-survival-models"><i class="fa fa-check"></i><b>5.3.2</b> Other survival models</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="5.4-portfolio-value-estimation.html"><a href="5.4-portfolio-value-estimation.html"><i class="fa fa-check"></i><b>5.4</b> Portfolio value estimation</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="5.4-portfolio-value-estimation.html"><a href="5.4-portfolio-value-estimation.html#mathematical-formulation"><i class="fa fa-check"></i><b>5.4.1</b> Mathematical formulation</a></li>
<li class="chapter" data-level="5.4.2" data-path="5.4-portfolio-value-estimation.html"><a href="5.4-portfolio-value-estimation.html#customer-lifetime-raw-value"><i class="fa fa-check"></i><b>5.4.2</b> Customer Lifetime Raw Value</a></li>
<li class="chapter" data-level="5.4.3" data-path="5.4-portfolio-value-estimation.html"><a href="5.4-portfolio-value-estimation.html#cluster-contribution-to-the-portfolio-value"><i class="fa fa-check"></i><b>5.4.3</b> Cluster contribution to the portfolio value</a></li>
<li class="chapter" data-level="5.4.4" data-path="5.4-portfolio-value-estimation.html"><a href="5.4-portfolio-value-estimation.html#simulations"><i class="fa fa-check"></i><b>5.4.4</b> Simulations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="hazard-function.html"><a href="hazard-function.html"><i class="fa fa-check"></i>Hazard function</a></li>
<li class="chapter" data-level="" data-path="link-between-cumulative-hazard-and-survivor-functions.html"><a href="link-between-cumulative-hazard-and-survivor-functions.html"><i class="fa fa-check"></i>Link between cumulative hazard and survivor functions</a></li>
<li class="chapter" data-level="" data-path="contribution-to-the-partial-likelihood-function-in-ph-models.html"><a href="contribution-to-the-partial-likelihood-function-in-ph-models.html"><i class="fa fa-check"></i>Contribution to the partial likelihood function in PH models</a></li>
<li class="chapter" data-level="" data-path="partial-likelihood-function-in-ph-models.html"><a href="partial-likelihood-function-in-ph-models.html"><i class="fa fa-check"></i>Partial likelihood function in PH models</a></li>
<li class="chapter" data-level="" data-path="mcaappendix.html"><a href="mcaappendix.html"><i class="fa fa-check"></i>Multiple correspondence analysis</a></li>
<li class="chapter" data-level="" data-path="hierarchical-clustering-on-principal-components-1.html"><a href="hierarchical-clustering-on-principal-components-1.html"><i class="fa fa-check"></i>Hierarchical clustering on principal components</a>
<ul>
<li class="chapter" data-level="" data-path="hierarchical-clustering-on-principal-components-1.html"><a href="hierarchical-clustering-on-principal-components-1.html#cluster-visualisation-1"><i class="fa fa-check"></i>Cluster visualisation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Portfolio, Churn &amp; Customer Value</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="performance-metrics" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Performance metrics</h2>
<div id="concordance-index-c-index" class="section level3" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Concordance index (C-index)</h3>
<p>C-index is a goodness of fit measure for models which produce risk scores. It is commonly used to evaluate risk models in survival analysis, where data may be censored.</p>
<p>Consider both the observations and prediction values of two instances <span class="math inline">\((y_1; \hat{y}_1)\)</span> and <span class="math inline">\((y_2; \hat{y}_2)\)</span>. <span class="math inline">\(y_i\)</span> and <span class="math inline">\(\hat{y}_i\)</span> represent respectively the actual observation time and the predicted time. Mathematically, the C-index is defined as the probability to well predict the order of event occurring time for any pair of instances.</p>
<p><span class="math display" id="eq:cindex">\[\begin{equation}
  c = \mathbb{P}\big(\hat{y}_1 &gt; \hat{y}_2 | y_1 &gt; y_2\big)
  \tag{3.20}
\end{equation}\]</span></p>
<p>Another way to write the C-index metric is to compute the ratio between concordant pairs and the total number of pairs. Consider individual <span class="math inline">\(i\)</span> and let <span class="math inline">\(T\)</span> be the time-to-event variable and <span class="math inline">\(\eta_i\)</span> the risk score assigned to <span class="math inline">\(i\)</span> by the model. We say that the pair <span class="math inline">\((i, j)\)</span> is a concordant pair if <span class="math inline">\(\eta_i &gt; \eta_j\)</span> and <span class="math inline">\(T_i &lt; T_j\)</span>, and it is a discordant pair if <span class="math inline">\(\eta_i &gt; \eta_j\)</span> and <span class="math inline">\(T_i &gt; T_j\)</span>. If both <span class="math inline">\(T_i\)</span> and <span class="math inline">\(T_j\)</span> are censored, then this pair is not taken into account in the computation. If <span class="math inline">\(T_j\)</span> is censored, then:</p>
<ul>
<li>If <span class="math inline">\(T_j &lt; T_i\)</span> the pair <span class="math inline">\((i, j)\)</span> is not considered in the computation since the order cannot be determined.</li>
<li>If <span class="math inline">\(T_j &gt; T_i\)</span>, the order can be determined and <span class="math inline">\((i, j)\)</span> is concordant if <span class="math inline">\(\eta_i &gt; \eta_j\)</span>, discordant otherwise.</li>
</ul>
<p>Equation <a href="3.7-performance-metrics.html#eq:cindex">(3.20)</a> can then be rewritten as follows:</p>
<p><span class="math display" id="eq:cindex2">\[\begin{equation}
\begin{aligned}
c &amp; = \frac{\# \text{concordant pairs}}{\# \text{concordant pairs} + \# \text{discordant pairs}} \\\\
c &amp; = \frac{\sum_{i \neq j} \pmb{1}_{\eta_i &lt; \eta_j} \pmb{1}_{T_i &gt; T_j}d_j}{\sum_{i \neq j} \pmb{1}_{T_i &gt; T_j}d_j}
\end{aligned}
\tag{3.21}
\end{equation}\]</span></p>
<p>with <span class="math inline">\(d_j\)</span> the event indicator variable.</p>
<p>The concordance index ranges between 0 and 1. A C-index below 0.5 indicates a very poor model. A C-index of 0.5 means that the model is rather a non-informative model making random predictions. A model with C-index 1 makes perfect prediction. Generally, a C-index higher than 0.7 indicates a good performance.</p>
</div>
<div id="brier-score" class="section level3" number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> Brier score</h3>
<p>The Brier score is another statistical metric for evaluating duration models’ performance and is defined as the mean squared error between the estimated survival probability and the observed survival at time <span class="math inline">\(t\)</span>:</p>
<p><span class="math display" id="eq:brier">\[\begin{equation}
  BS(t) = \frac{1}{N} \sum_{i=1}^{N} \Big(\pmb{1}_{\{t_i&gt;t\}} - \hat{S}(t|\mathrm{x}_i) \Big)^2
  \tag{3.22}
\end{equation}\]</span></p>
<p>The Cox <em>proportional hazards</em> model is the most popular for the analysis of duration data. This model is said to be semi-parametric as it makes no assumption regarding the nature of the baseline hazard function <span class="math inline">\(\lambda_0(t)\)</span>. The parametric part only relies in the modelling of the effect of some covariates on the hazard function <span class="math inline">\(\lambda(t)\)</span>. The relationship between the vector of covariates and the log hazard is linear and the parameters can be estimated by maximizing the partial likelihood function. The Cox PH model solely assumes that predictors act multiplicatively on the hazard function. The model is formulated as in equation <a href="3.6-semi-parametric-estimation.html#eq:ph">(3.15)</a> with the exponential function as link between the hazard and the covariates i.e. <span class="math inline">\(\lambda(t|\pmb{\mathrm{x}}) = \lambda_0 (t,\alpha) \text{e}^{\pmb{\mathrm{x&#39;}} \beta}\)</span>.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="3.6-semi-parametric-estimation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="4-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["portfolio_churn_value.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
